<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>텍스트 비교 도구 | 차이점 찾기 (줄/단어/문자) - Thenaom Tools</title>
<meta name="description" content="두 텍스트를 비교해 차이점을 빠르게 찾는 무료 온라인 도구. 줄/단어/문자 단위 비교, 공백·대소문자 무시 옵션 지원.">
<link rel="canonical" href="https://tools.thenaom.com/tools/diff.html">
<link rel="stylesheet" href="../assets/styles.css">
</head>
<body>
<header class="site">
  <div class="container" style="display:flex;gap:16px;align-items:center;justify-content:space-between">
    <a class="brand" href="/">Thenaom Tools</a>
    <nav><ul><li><a class="active" href="/text/">텍스트 정리</a></li><li><a href="/convert/">분할/변환</a></li><li><a href="/utility/">유틸</a></li></ul></nav>
  </div>
</header>

<section class="hero"><div class="container">
  <h1>텍스트 비교 도구 (Diff)</h1>
  <p class="muted">줄/단어/문자 단위 비교 · 추가/삭제/변경 하이라이트 · 브라우저에서만 처리</p>
</div></section>

<div class="container">
  <div class="ad-placeholder"><b>광고 자리</b><small>AdSense 승인 후 코드 (naom_diff_top)</small></div>

  <div class="toolbar card" style="margin-bottom:14px;display:flex;flex-wrap:wrap;gap:8px;align-items:center">
    <label>비교 단위
      <select id="mode">
        <option value="line">줄 단위</option>
        <option value="word">단어 단위</option>
        <option value="char">문자 단위</option>
      </select>
    </label>
    <label><input type="checkbox" id="ignoreSpace" checked> 공백 무시</label>
    <label><input type="checkbox" id="ignoreCase"> 대소문자 무시</label>
    <span style="flex:1"></span>
    <button class="btn secondary" id="swapBtn">↔︎ 바꾸기</button>
    <button class="btn secondary" id="clearBtn">지우기</button>
    <button class="btn" id="compareBtn">비교</button>
  </div>

  <div class="grid cols2">
    <article class="card"><h2>텍스트 A (기준)</h2><textarea id="a"></textarea></article>
    <article class="card"><h2>텍스트 B (비교)</h2><textarea id="b"></textarea></article>
  </div>

  <div class="legend" style="margin:10px 0;display:flex;gap:10px;flex-wrap:wrap;align-items:center">
    <span class="chip"><span class="mono" style="background:#16a34a20">&nbsp;&nbsp;</span> 추가됨</span>
    <span class="chip"><span class="mono" style="background:#dc262620">&nbsp;&nbsp;</span> 삭제됨</span>
    <span class="chip"><span class="mono" style="background:#f59e0b20">&nbsp;&nbsp;</span> 변경됨</span>
    <span class="stat" id="stat"></span>
    <span style="flex:1"></span>
    <button class="btn secondary" id="copyHtmlBtn">HTML 복사</button>
    <button class="btn secondary" id="downloadBtn">HTML 저장</button>
  </div>

  <div class="card"><div id="result" class="mono" style="white-space:pre-wrap"></div></div>

  <div class="ad-placeholder"><b>광고 자리</b><small>AdSense 승인 후 코드 (naom_diff_bottom)</small></div>

  <h2 class="section-title">관련 도구</h2>
  <div class="grid cols2">
    <article class="card"><h2>중복 줄 제거</h2><p>중복된 행 제거, 대소문자/공백 무시.</p><a class="btn" href="/tools/dedupe-lines.html">열기</a></article>
    <article class="card"><h2>줄 정렬/랜덤</h2><p>텍스트 줄 정렬 및 랜덤 셔플.</p><a class="btn" href="/tools/sort-lines.html">열기</a></article>
  </div>
</div>

<footer class="site"><div class="container">© <span id="y"></span> Thenaom Tools</div></footer>
<script>document.getElementById('y').textContent=new Date().getFullYear();</script>

<script>
(function(){
  const qs=s=>document.querySelector(s);
  const escapeHtml=s=>s.replace(/[&<>"']/g,m=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m]));
  function normalize(str,opt){
    let s=str.replace(/\r\n/g,'\n');
    if(opt.ignoreSpace){s=s.replace(/[ \t]+/g,' ');if(opt.mode==='line')s=s.replace(/[ \t]+$/gm,'');}
    if(opt.ignoreCase) s=s.toLowerCase();
    return s;
  }
  function tokenize(str,mode){
    if(mode==='line') return str.split('\n');
    if(mode==='word') return str.split(/(\s+|[^\w가-힣_]+)/).filter(x=>x!==''&&!/^\s+$/.test(x));
    return [...str];
  }
  function diffArrays(a,b){
    const n=a.length,m=b.length,dp=Array(n+1).fill(0).map(()=>Array(m+1).fill(0));
    for(let i=n-1;i>=0;i--)for(let j=m-1;j>=0;j--)dp[i][j]=a[i]===b[j]?dp[i+1][j+1]+1:Math.max(dp[i+1][j],dp[i][j+1]);
    const ops=[];let i=0,j=0;
    while(i<n&&j<m){
      if(a[i]===b[j]){ops.push({type:'eq',text:a[i]});i++;j++;}
      else if(dp[i+1][j]>=dp[i][j+1]){ops.push({type:'del',text:a[i++]});}
      else{ops.push({type:'add',text:b[j++]});}
    }
    while(i<n)ops.push({type:'del',text:a[i++]});
    while(j<m)ops.push({type:'add',text:b[j++]});
    return ops;
  }
  function renderOps(ops,mode){
    const joiner=mode==='line'?'\n':' ';
    return ops.map(op=>{
      const t=escapeHtml(op.text);
      if(op.type==='eq')return t;
      if(op.type==='add')return `<mark style="background:#16a34a20">${t}</mark>`;
      if(op.type==='del')return `<mark style="background:#dc262620">${t}</mark>`;
      if(op.type==='chg')return `<mark style="background:#f59e0b20">${t}</mark>`;
    }).join(mode==='char'?'':joiner);
  }
  function compare(){
    const mode=qs('#mode').value;
    const opt={ignoreSpace:qs('#ignoreSpace').checked,ignoreCase:qs('#ignoreCase').checked,mode};
    const aT=tokenize(normalize(qs('#a').value,opt),mode);
    const bT=tokenize(normalize(qs('#b').value,opt),mode);
    const ops=diffArrays(aT,bT);
    for(let i=0;i<ops.length;i++){
      if(ops[i]?.type==='del'&&ops[i+1]?.type==='add'){ops[i].type='chg';ops[i+1].type='chg';}
      if(ops[i]?.type==='add'&&ops[i+1]?.type==='del'){ops[i].type='chg';ops[i+1].type='chg';}
    }
    qs('#result').innerHTML=renderOps(ops,mode)||'<span class="muted">결과 없음</span>';
    const add=ops.filter(o=>o.type==='add').length,del=ops.filter(o=>o.type==='del').length;
    qs('#stat').textContent=`+${add} / -${del}`;
  }
  qs('#compareBtn').addEventListener('click',compare);
  qs('#swapBtn').addEventListener('click',()=>{const a=qs('#a').value,b=qs('#b').value;qs('#a').value=b;qs('#b').value=a;compare();});
  qs('#clearBtn').addEventListener('click',()=>{qs('#a').value='';qs('#b').value='';qs('#result').innerHTML='';qs('#stat').textContent='';});
  ['mode','ignoreSpace','ignoreCase'].forEach(id=>qs('#'+id).addEventListener('change',compare));
  qs('#copyHtmlBtn').addEventListener('click',()=>navigator.clipboard.writeText(qs('#result').innerHTML));
  qs('#downloadBtn').addEventListener('click',()=>{
    const blob=new Blob([`<!doctype html><meta charset="utf-8"><style>
    mark{padding:0 2px}
    mark.add{background:#16a34a20}mark.del{background:#dc262620}mark.chg{background:#f59e0b20}
    body{font:15px/1.6 ui-monospace,Consolas,Menlo,monospace;white-space:pre-wrap}
    </style><body>${qs('#result').innerHTML}`],{type:'text/html;charset=utf-8'});
    const a=document.createElement('a');a.href=URL.createObjectURL(blob);a.download='diff-result.html';a.click();
  });
})();
</script>
</body>
</html>
